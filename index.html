<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Verdana Class of 2025 ‚Äî Forest of Memories</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Dancing+Script:wght@600&family=Cinzel:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg-overlay: linear-gradient(rgba(10, 30, 40, 0.6), rgba(5, 15, 25, 0.9));
      --accent: #2ecc71;
    }

    body {
      background: #0a0f0f; color: #e0f7ff;
      font-family: 'Montserrat', sans-serif;
      overflow-x: hidden; min-height: 100vh; position: relative;
      cursor: default; transition: filter 1s ease;
    }

    /* SEASONAL THEMES */
    body.season-autumn { --accent: #e67e22; --bg-overlay: linear-gradient(rgba(60, 30, 10, 0.6), rgba(40, 15, 5, 0.9)); }
    body.season-autumn .leaf { background: #d35400; }
    
    body.season-winter { --accent: #3498db; --bg-overlay: linear-gradient(rgba(10, 20, 50, 0.6), rgba(5, 10, 30, 0.9)); }
    body.season-winter .leaf { background: #fff; border-radius: 50%; width: 6px; height: 6px; box-shadow: 0 0 5px #fff; } 

    /* --- 1. ENTER SCREEN --- */
    #enterScreen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #020505; z-index: 9999;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      transition: opacity 1.5s ease-in-out;
    }
    .enter-btn {
      padding: 15px 50px; background: transparent; border: 1px solid #2ecc71;
      color: #2ecc71; font-family: 'Montserrat'; letter-spacing: 3px; cursor: pointer;
      font-size: 1rem; transition: all 0.5s; border-radius: 50px; text-transform: uppercase;
      box-shadow: 0 0 15px rgba(46, 204, 113, 0.2);
    }
    .enter-btn:hover { background: #2ecc71; color: #000; box-shadow: 0 0 40px rgba(46, 204, 113, 0.6); transform: scale(1.05); }

    /* --- 2. BACKGROUND --- */
    .tree-bg {
      position: fixed; top: 0; left: 0; width: 100%; height: 100vh; 
      background: var(--bg-overlay), url('tree-bg.jpg') center/cover no-repeat;
      z-index: 1; animation: breathe 25s ease-in-out infinite alternate; will-change: transform; 
      transition: background 1.5s ease;
    }
    @keyframes breathe { 0% { transform: scale(1); filter: brightness(0.8); } 100% { transform: scale(1.05); filter: brightness(1); } }

    #rootsCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 4; pointer-events: none; opacity: 0.3; }

    .leaf {
      position: fixed; top: -10%; width: 15px; height: 15px;
      background: rgba(46, 204, 113, 0.1); border-radius: 2px 10px;
      pointer-events: none; z-index: 2; animation: fall linear infinite;
      transition: background 1.5s, border-radius 1.5s;
    }
    @keyframes fall {
      0% { transform: translateY(-10vh) rotate(0deg) translateX(0px); opacity: 0; }
      10% { opacity: 0.5; }
      100% { transform: translateY(110vh) rotate(720deg) translateX(50px); opacity: 0; }
    }

    .trail-dot {
      position: fixed; width: 8px; height: 8px; background: white; border-radius: 50%;
      pointer-events: none; z-index: 999; animation: fadeTrail 1s forwards;
      box-shadow: 0 0 10px #fff, 0 0 20px var(--accent);
    }
    @keyframes fadeTrail { to { opacity: 0; transform: scale(0); } }

    /* --- 3. LAYOUT --- */
    .container { position: relative; z-index: 5; width: 100%; min-height: 100vh; padding: 30px 20px 150px 20px; }
    .header { text-align: center; margin-bottom: 50px; padding-top: 40px; position: relative; z-index: 60; }
    
    .main-title {
      font-size: 3.5rem; font-weight: 600; color: #ffffff; margin-bottom: 15px; letter-spacing: 2px;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.4), 0 0 40px var(--accent), 0.3;
      animation: titleGlow 5s ease-in-out infinite alternate;
    }
    @keyframes titleGlow { 0% { text-shadow: 0 0 20px rgba(255, 255, 255, 0.4); } 100% { text-shadow: 0 0 50px rgba(255, 255, 255, 0.8), 0 0 80px var(--accent); } }

    .subtitle { font-size: 1.2rem; color: #ffffff; font-weight: 300; letter-spacing: 4px; text-transform: uppercase; margin-bottom: 25px; opacity: 0.8; }
    .quote { font-style: italic; color: #b4e0ff; font-size: 1.1rem; max-width: 600px; margin: 0 auto; line-height: 1.8; border-left: 2px solid var(--accent); padding-left: 20px; }

    /* --- 4. FIREFLIES --- */
    .firefly {
      position: absolute; width: 60px; height: 60px; display: flex; justify-content: center; align-items: center;
      z-index: 10; cursor: pointer;
      transition: left 2s cubic-bezier(0.25, 1, 0.5, 1), top 2s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s, transform 0.5s;
      -webkit-tap-highlight-color: transparent; 
    }
    .firefly.drifting { animation: wideDrift 25s ease-in-out infinite; }

    .firefly-inner {
      width: 35px; height: 35px; border-radius: 50%;
      background-color: var(--glow-color); 
      box-shadow: 0 0 15px var(--glow-color), 0 0 30px var(--glow-color);
      background-size: cover; background-position: center;
      opacity: 0.8; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative; display: flex; justify-content: center; align-items: center;
      color: white; font-weight: bold; font-size: 14px; text-shadow: 0 0 4px #000;
    }
    .firefly-inner.image-loaded { opacity: 1; border: 1px solid rgba(255,255,255,0.6); }
    .firefly:hover { z-index: 100; }
    .firefly.drifting:hover { animation-play-state: paused; }
    .firefly:hover .firefly-inner { transform: scale(2.2); filter: brightness(1.2); box-shadow: 0 0 20px #fff, 0 0 40px var(--glow-color), 0 0 80px var(--glow-color); }

    .firefly-name {
      position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%);
      font-size: 11px; font-weight: 600; color: #fff;
      background: rgba(0, 0, 0, 0.85); padding: 5px 12px; border-radius: 12px;
      white-space: nowrap; opacity: 0; pointer-events: none; z-index: 20;
      transition: opacity 0.3s ease; border: 1px solid rgba(255,255,255,0.2);
    }
    .firefly:hover .firefly-name { opacity: 1; }
    .firefly.dimmed { opacity: 0.05; transform: scale(0.5); pointer-events: none; }
    .firefly.matched { opacity: 1; z-index: 50; }

    @keyframes wideDrift {
      0%, 100% { transform: translate(0, 0); }
      25% { transform: translate(40px, -40px); }
      50% { transform: translate(-30px, 50px); }
      75% { transform: translate(-50px, -20px); }
    }
    .firefly:nth-child(odd).drifting { animation-duration: 30s; animation-direction: reverse; }

    /* --- 5. UI (MOBILE FIX) --- */
    .ui-bar {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
      z-index: 200; width: 95%; max-width: 600px;
      display: flex; gap: 10px; align-items: center; justify-content: center;
    }
    .search-input {
      flex: 2; padding: 15px 25px; border-radius: 30px;
      border: 1px solid rgba(255,255,255,0.2); background: rgba(10, 20, 30, 0.8);
      color: white; font-family: 'Montserrat'; font-size: 1rem;
      backdrop-filter: blur(10px); outline: none; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
      transition: all 0.3s;
    }
    .search-input:focus { border-color: var(--accent); box-shadow: 0 5px 25px rgba(46, 204, 113, 0.3); }

    .controls-row {
      display: flex; gap: 10px;
    }

    .icon-btn {
      width: 50px; height: 50px; border-radius: 50%; flex-shrink: 0;
      border: none; background: linear-gradient(135deg, var(--accent), #27ae60);
      color: white; cursor: pointer; display: flex; justify-content: center; align-items: center;
      font-size: 1.2rem; box-shadow: 0 5px 20px rgba(0,0,0,0.4);
      transition: transform 0.2s, background 0.3s;
    }
    .icon-btn:active { transform: scale(0.9); }
    .icon-btn.active { background: #e74c3c; animation: pulseRed 2s infinite; }
    
    .icon-btn.mode-active { background: #9b59b6; box-shadow: 0 0 20px #9b59b6; animation: rotateLoader 2s linear infinite; }
    @keyframes rotateLoader { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes pulseRed { 0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); } }

    /* --- 6. FLAT GLOWING MODAL --- */
    .tribute-modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9); z-index: 1000; backdrop-filter: blur(10px);
    }

    .modal-content {
      position: absolute; background: #151515; 
      width: 360px; border-radius: 20px; padding: 40px 30px;
      text-align: center; border: 1px solid rgba(255, 255, 255, 0.15);
      
      /* THE GLOW EFFECT */
      box-shadow: 0 0 40px var(--modal-glow, rgba(46, 204, 113, 0.3));
      
      max-height: 85vh; overflow-y: auto; overflow-x: hidden;
      animation: modalPop 0.4s ease-out;
    }
    
    @keyframes modalPop { 
      from { opacity: 0; transform: scale(0.9) translateY(20px); } 
      to { opacity: 1; transform: scale(1) translateY(0); } 
    }

    .modal-photo {
      width: 140px; height: 140px; border-radius: 50%; margin: 0 auto 15px;
      background-size: cover; background-position: center;
      border: 4px solid rgba(255,255,255,0.9);
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }

    .modal-name { 
      font-family: 'Dancing Script', cursive; 
      font-size: 2.5rem; font-weight: 600; color: #fff; margin-bottom: 10px; 
      text-shadow: 0 5px 15px rgba(0,0,0,0.5); 
    }

    .modal-truth { 
      font-size: 1rem; color: #f0f0f0; margin-bottom: 30px; line-height: 1.7; min-height: 60px;
      font-weight: 300; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;
      font-style: italic; border: 1px solid rgba(255,255,255,0.1);
    }
    
    .typing-cursor::after { content: '|'; animation: blink 1s infinite; color: var(--accent); }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    .close-btn {
      padding: 12px 30px; border-radius: 30px; border: none; cursor: pointer;
      font-family: 'Montserrat'; font-weight: 700; font-size: 0.9rem;
      color: white; width: 100%; justify-content: center;
      background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
    }
    .close-btn:hover { background: #fff; color: #000; }

    .footer { position: relative; z-index: 10; text-align: center; padding: 0 20px 80px 20px; color: #88d3fa; font-size: 0.8rem; opacity: 0.7; }

    /* --- MOBILE RESPONSIVENESS FIXES --- */
    @media (max-width: 768px) {
      .main-title { font-size: 2.2rem; }
      
      /* Fix 1: Stack the UI Bar */
      .ui-bar {
        flex-direction: column;
        width: 90%;
        bottom: 15px;
        gap: 10px;
      }
      .search-input { width: 100%; }
      .controls-row { width: 100%; justify-content: center; gap: 15px; }
      
      .firefly { width: 50px; height: 50px; }
      
      /* Fix Modal on Mobile */
      .tribute-modal { display: none; align-items: center; justify-content: center; }
      .modal-content { 
        position: relative !important; left: auto !important; top: auto !important; margin: 0 auto;
        transform: none !important; width: 90%;
      }
    }
  </style>
</head>
<body>

  <audio id="bgMusic" loop>
    <source src="forest_theme.mp3" type="audio/mpeg">
  </audio>

  <div id="enterScreen">
    <h1 id="enterTitle" style="color:white; font-family:'Montserrat'; font-weight:300; margin-bottom:10px; letter-spacing:8px; font-size:1.5rem; text-align:center;">VERDANA '25</h1>
    <h2 id="enterSubtitle" style="color:#2ecc71; font-family:'Montserrat'; margin-bottom:40px; font-size:2.5rem; text-align:center;">FOREST OF MEMORIES</h2>
    <button class="enter-btn" onclick="enterForest()">Enter Forest</button>
  </div>

  <div class="tree-bg"></div>
  <div class="tree-aura"></div>
  <canvas id="rootsCanvas"></canvas>
  <div id="leafContainer"></div>

  <div class="container" id="mainContainer">
    <div class="header">
      <h1 class="main-title">Forest of Memories</h1>
      <div class="subtitle">Verdana Class of 2025</div>
      <div class="quote">"Though our branches reach in different directions, our roots remain forever intertwined in this soil we called home."</div>
    </div>
    <div class="footer">Department of Forestry, University of Ibadan<br><em>Where every leaf tells a story</em></div>
  </div>

  <div class="ui-bar">
    <input type="text" class="search-input" id="searchInput" placeholder="Find a classmate..." onkeyup="filterFireflies()">
    <div class="controls-row">
      <button class="icon-btn" id="seasonBtn" onclick="toggleSeason()" title="Change Season">üçÉ</button>
      <button class="icon-btn" id="shapeBtn" onclick="startFormationSequence()" title="Start Formation Show">‚ú®</button>
      <button class="icon-btn" id="tourBtn" onclick="toggleTour()" title="Start Guided Tour">‚ñ∂</button>
    </div>
  </div>

  <div class="tribute-modal" id="tributeModal">
    <div class="modal-content" id="modalContent">
      <div class="modal-photo" id="modalPhoto"></div>
      <h2 class="modal-name" id="modalName"></h2>
      <div class="modal-truth" id="modalTruth"></div>
      <button class="close-btn" onclick="closeModal()">Return to Forest</button>
    </div>
  </div>

  <script>
    const colors = ['#2ecc71', '#5e72e4', '#9b59b6', '#f1c40f', '#e74c3c', '#1abc9c', '#3498db', '#ff9ff3'];
    
    const realClassmates = [
  { name: "AYANWOLA Oluwaseyi", truth: "You always knew your way around the ball. The Captain forever. You will definitely hit your goal." },
  { name: "AASA Dolapo", truth: "First of his name, first of the class. You did it. The sky is just the first step on the journey. You have begun this path of greatness." },
  { name: "ABDULFATAI Zaynab", truth: "Your focus and drive have been your compass. Even when panic came, you never stopped putting in the work. Your determination makes it clear you‚Äôre destined¬†for¬†greatness." },
  { name: "ABOSAN Temitope", truth: "An entrepreneur with a heart to serve. You will definitely scale through." },
  { name: "ADARANIWON Emmanuel", truth: "Black like ever. Black but your smile and light shone through dark hearts. Lovely lovely brother!." },
  { name: "ADEDOJA Sarah", truth: "Agba Baller. You definitely had the aura and steeze. Keep balling." },
  { name: "ADEDOKUN Lois", truth: "Silent as a dove, strong as an Eagle. You rocked this journey your own way." },
  { name: "ADEGBOYE Peter", truth: "Even Machines learn from you. Never Yielding, never static, Never doubting. Keep being the rock." },
  { name: "ADELEKE Victoria", truth: "Once an honourable, forever an honourable. You drove through the years like a wind. It's you!" },
  { name: "ADENIJI Shukrat", truth: "A gift that kept giving, like a fruit tree in constant bloom. Sweet sweet Babypink." },
  { name: "ADERINTO Comfort", truth: "Well, well, well. You have two options, walk elegantly to greatness or dance your way to impact. Cause that's who you are and what you do!." },
  { name: "ALABI Adeola", truth: "You lived with the strength of an ancient oak and fought with the heart of a lion. If kindness could have a human definition, it would be you." },
  { name: "ASAMU Azeezat", truth: "You started with questions, uncertain of the soil. You are leaving as the answer‚Äîfirm, flourishing, and sure." },
  { name: "ASOGBA Tawakalitu", truth: "What can't you name? Name it. Well, you didn't just name flora, you made a name for yourself. TAWAA the star!" },
  { name: "AZODO Genevieve", truth: "If all the precious stones in existence could be made into one object, it still wouldn't be as beautiful and graceful as you are." },
  { name: "EMOVON Osaretin", truth: "You showed your strength with a hardworking, joyful, and playful charm, and that makes you unforgettable. We all need ourselves an Osaretin." },
  { name: "ETUMUDON Funmilayo", truth: "You shone through the struggles like sunlight piercing the canopy. Now, you are a diamond forged by the pressure." },
  { name: "FAYIGA Kehinde", truth: " A true sweetheart. Smart, resourceful, and unwavering. You pursued this degree with a tenacity that left no room for doubt, and every bit of your success reflects the strength you poured into the journey. It paid off, beautifully¬†and¬†completely." },
  { name: "FOLORUNSO Olaoluwa", truth: "Definitely, the world will bow at your greatness. You have just begun the race, and your stride is terrifyingly perfect." },
  { name: "GEGE Eniola", truth: "Always ready, always on time. You don‚Äôt just get things done.. you elevate everything you touch. Gorgeous, poised, and unshakably committed, you are the Modella: a model in beauty, a¬†model¬†in¬†work." },
  { name: "MAJOLAGBE Yusrah", truth: "Roses are red, violets are blue, they doubted the seed, but the flower blew their minds." },
  { name: "NWAIKPE Kelechi", truth: "Oh, my days! Yes, it is your day. You are resolute as a rock, fun, jovial and everything good!" },
  { name: "OGUNDIRAN Favour", truth: "As the silent creek moved, so you did. Never were you fazed: Keep being brave." },
  { name: "OGUNMOSIN Tobiloba", truth: "Were you tired? Probably. Were you concerned? Maybe. Did you scale through like a legend? Absolutely. Odogwu himself!" },
  { name: "OLAYIWOLA Opeyemi", truth: "I guess it was tough. But look ahead, Ope. Greatness isn't just waiting for you; it's running towards you." },
  { name: "OLUWAGBEMIGA Gbolahan", truth: "A truly special person, your humor and charm made everyone around you feel at ease. Even if people questioned you, they will not understand how you did it. Realest G ever." },
  { name: "OLUWASEUN Oyindamola", truth: "Sugar is sweet. Honey is sweeter, but you proved you were sweetest. How? You waved the bitterness away. Cheers." },
  { name: "OPADEJI Deborah", truth: "You kept going like you weren't being beaten by the rain. Now it's all a dream, and you are the dreamer who woke up winning." },
  { name: "OWOLABI Oyinlola", truth: "It felt like forever, but now it's over. Oyin, you made it. And like fine wine, it only gets better from here." },
  { name: "OYADOKE Adesubomi", truth: "Original Jessica herself! Your committment and dedication to the things you do is one to reckon with. A gem, truly." },
  { name: "OYEDIJO Olanrewaju", truth: "Your calmness and composure in times of chaos has to be studied. You saw the need to be better when others settled for good. You led the rest and walked the length. Amazing!" },
  { name: "QUADRI Ayomide", truth: "Flair like no one else, set like the morning dew on a fresh leaf. You didn't just pass through; you flowed through. Never trade that fun personality of yours for anything!" },
  { name: "SALAMI Jessica", truth: "A young lady with a big big big heart. You alone are enough to describe the meaning of love. Don't ever lose that!" },
  { name: "SUNMONU Halimat", truth: "There will never be another like you. 60 years from now, history will discover what you did here. Cheers to perfection." },
  { name: "YUSUF Habeeb", truth: "Felt out of touch? Maybe. But now you can touch better things. The sky is no longer the limit for you." },
  { name: "KUKOYI Esther", truth: "If perseverance were a person, it would be you. You stood tall, moving through this journey with relentless passion, navigating the processes like pulp turning into paper.. transforming challenges into strength. A Queen, truly." },
  { name: "BELLO Aishat", truth: "Was there a period of less interest? Maybe. But did you put in your best? Definitely. Ashantii, you made a top kill! Enjoy." },
  { name: "AYENI Opeyemi", truth: "Your gentle heart and readiness to show up for others say so much about who you are. Even when the road was rocky, you stood firm and never gave up on this journey. Cheers!" },
  { name: "FASAN Goodness", truth: "Freaking BGS. What can be said? It's all paid off. It will all pay off. You will get paid, Cause you paid the price." },
  { name: "AIGBABHIELEA Fortunate", truth: "Fortunately, you are here today. It was a tough ride, yeah? Now you move on to the absolute best!" },
  { name: "OKE David", truth: "It was strange at first, but you blended in so well, and now you have cooked the best you can. You can now enjoy." },
  { name: "SANUSI Saidat", truth: "Does the rain fall without noise? Yet you made an impact without screams. You are incredible." },
  { name: "ADAOLOWO Henry", truth: "Some people watch the forest; you were born to guide it. A vast mind with a spirit that refuses to be contained. Never yielding, never broken.. the sky is your starting point!" },
  { name: "ADARAMOYE Oluwabukolami", truth: "You wielded your pen, and made the world dance. You truly are special and never let anyone tell you otherwise!" },
  { name: "ADEDIRAN Saheed", truth: "You bent reality to your will. Where others saw a thicket, you saw a path. Never yielding, always grinding." },
  { name: "ADEKUNLE-ONI Daniel", truth: "The road was thorny, and the climb was steep, but you didn't just walk it, you flew. Though little.. you are bigger than the what we could imagine now." },
  { name: "ADEOSUN Adeola", truth: "You kept the goal safe. You made your mark. You have now set the mark. Keep jumping." },
  { name: "ADEOYE Funmilayo", truth: "Nothing was too big for you to handle. You stood before giants and remained composed. Now, you stand among them." },
  { name: "ADESOKAN Taiwo", truth: "You didn't cower when the storms came. You rooted yourself deeper, imagined a brighter sun, and grew towards it. The world isn't ready for how sweet you are." },
  { name: "AKADRI Moyosoluwa", truth: "The world is at your feet, waiting for your roots to take hold. Let them feel the heat of your ambition!" },
  { name: "AKANBI Muzidatul-khair", truth: "You held onto high standards when it was easier to let go. You are better than they think." },
  { name: "AKAPO Taiwo", truth: "The treasure that you had was nowhere to be found. Only you and your dreams could hold such a treasure. Now, go and spend, the esteemed Treasurer." },
  { name: "AKIN-OLANIYI Olamide", truth: "Every step was a challenge, and you turned every challenge into a stepping stone. You didn't just meet the bar; you became it!" },
  { name: "AKINTAYO Ayomide", truth: "Only the blind could ignore your light. You illuminate the dark days of those around you with a delight that is purely your own." },
  { name: "AWE Oluwatowoju", truth: "Look at the whole picture: You didn't give up. You believed when the drought came, and now your harvest is here." },
  { name: "AYODELE Oluwatomiwa", truth: "Beauty, brains, steeze, resilience, sweetness. What don't you have? Please hold on tight to themm!" },
  { name: "BABALOLA Rebecca", truth: "Beauty is in the eye of the beholder, but your radiance made us all stare. You bloomed where you were planted." },
  { name: "IPAYE Damilare", truth: "Asides the fact that you hit so many goals, you did it with such flair and steeze. Now, go and dominate the world." },
  { name: "LAWAL Afeez", truth: "It felt like an endless winter, but spring has come. You made it through, and you left a mark on the bark of time." },
  { name: "LIADI Gloria", truth: "No one could do what you have done. You have run through a troop. Glorious GLORIA!" },
  { name: "MGBAKOR Ifechukwu", truth: "You were always giving and you kept giving. What a gift you are. The world is not ready for your steppings though." },
  { name: "ODEFUNSO Ololade", truth: "Omo ope. Amazing things were done by you, and the world is anxious for moree!" },
  { name: "OGUNKEYE Mosope", truth: "Never was such doggedness seen. You made the impossible look easy, shielding us from how hard you were actually working." },
  { name: "OGUNTOLA Oreoluwa", truth: "Only the wise could see how immersive you were. You gave this your absolute best! Never ever tone down on that." },
  { name: "OJOJO Folashade", truth: "Well, it is never to be forgotten that you walked through these halls. Your walk reverberated and made sounds unique to your signature. God's own masterpiecee!" },
  { name: "OKHIRIA Joshua", truth: "Heaven may fall, but your movement will never cease. You played through the pain and became the best version of yourself." },
  { name: "OLABAMIJI Suhad", truth: "Even in the night, your might was in sight. You never stopped the fight, proving that the sun always rises." },
  { name: "OLUWASUMBO Titilayo", truth: "It was always meant to be this way. You are destiny's child, meant to test the limits and beat the feats." },
  { name: "OLATOYINBO Deborah", truth: "As quiet as a dove, yet very graceful and elegant in all your ways." },
  { name: "OLOFINTUYI Fateemah", truth: "Every day you wake up, remind the world that it needs to wake up to your grace. You are the morning dew." },
  { name: "OLUPITAN Toheebat", truth: "Never let your heart deceive you; you were an amazing chapter in this story. The book would be incomplete without you." },
  { name: "OLUWAKAYODE Jerry", truth: "Feeling funky? You deserve it. The experiment finally worked, and you deserve every treat life offers now." },
  { name: "ONYEUKWU Amarachi", truth: "Making this stride is nothing to feel small about. Shout it! Scream it! Let the world echo that you did it! You are the Grace that Grace itself needs." },
  { name: "OYEBANJI Israel", truth: "Perspectives may differ, agendas may be long, but the scope is that, you are a giant, and you always make a huge stride." },
  { name: "OYEBODE Sunday", truth: "You started with cooking and ended with an amazing meal. You did the best and were the best." },
  { name: "POPOOLA Olamide", truth: "Quiet yet radiant, you are the peace we always needed. Your actions speak louder than words, and your warmth touches everyone around you. May your journey ahead be as serene and beautiful as the presence¬†you¬†bring." },
  { name: "SORINADE Mary", truth: "Keep pushing. Why? Because you literally pushed this mountain until it moved. You are incredible!" },
  { name: "THOMAS Daniel", truth: "Well-put, strategic, and invaluable.. not just in the work you do, but to everyone privileged to call you a friend. Let it be known: You came, you saw, and you became a legend." }
];

    function getPhotoName(fullName) { return fullName.toLowerCase().replace(/ /g, '_') + '.jpg'; }

    // State
    const classmates = [];
    let isTouring = false;
    let formationState = 0; // 0=Drift, 1-6=Shapes
    let autoCycleInterval = null;
    let rainInterval = null; 
    let tourIndex = 0;
    let tourTimer = null;
    let typeWriterInterval = null;
    let currentSeason = 0; // 0=Spring, 1=Autumn, 2=Winter

    // --- SETUP DATA ---
    realClassmates.forEach((person, index) => {
      classmates.push({
        id: index,
        name: person.name,
        photo: `images/${getPhotoName(person.name)}`,
        truth: person.truth,
        x: 5 + Math.random() * 85, 
        y: 400 + (index * 40) + (Math.random() * 100), 
        color: colors[index % colors.length],
      });
    });

    // --- ENTRY LOGIC ---
    function enterForest() {
      const screen = document.getElementById('enterScreen');
      const music = document.getElementById('bgMusic');
      screen.style.opacity = '0';
      music.volume = 0.5;
      music.play().catch(e => console.log("Audio blocked:", e));
      setTimeout(() => {
        screen.style.display = 'none';
        initPage(); 
      }, 1500);
    }

    function initPage() {
      createFireflies();
      createLeaves();
      setTimeout(adjustContainerHeight, 100);
      initRoots();
    }

    // --- 2. PARTICLES ---
    function createFireflies() {
      const container = document.getElementById('mainContainer');
      classmates.forEach(classmate => {
        const firefly = document.createElement('div');
        firefly.className = 'firefly drifting';
        firefly.id = `fly-${classmate.id}`;
        firefly.style.setProperty('--glow-color', classmate.color);
        firefly.style.left = `${classmate.x}vw`;
        firefly.style.top = `${classmate.y}px`;
        
        const inner = document.createElement('div');
        inner.className = 'firefly-inner';
        
        const img = new Image();
        img.src = classmate.photo;
        img.onload = () => { inner.style.backgroundImage = `url('${img.src}')`; inner.classList.add('image-loaded'); };
        img.onerror = function() { if (this.src.endsWith('.jpg')) { this.src = this.src.replace('.jpg', '.jpeg'); } else { inner.innerText = classmate.name.charAt(0); inner.classList.add('image-loaded'); } };

        firefly.appendChild(inner);
        const nameLabel = document.createElement('div');
        nameLabel.className = 'firefly-name';
        nameLabel.textContent = classmate.name;
        firefly.appendChild(nameLabel);
        
        firefly.addEventListener('click', (e) => {
          e.stopPropagation();
          if (isTouring) toggleTour(); 
          if(formationState !== 0) { formationState = -1; cycleFormation(); } // Reset drift
          showTribute(classmate, e.clientX, e.clientY);
        });
        
        firefly.style.animationDelay = `${Math.random() * 10}s`;
        container.appendChild(firefly);
      });
    }

    function createLeaves() {
      const container = document.getElementById('leafContainer');
      for (let i = 0; i < 30; i++) {
        const leaf = document.createElement('div');
        leaf.className = 'leaf';
        leaf.style.left = `${Math.random() * 100}vw`;
        leaf.style.animationDuration = `${15 + Math.random() * 15}s`;
        leaf.style.animationDelay = `${Math.random() * 10}s`;
        container.appendChild(leaf);
      }
    }

    // --- 3. AUTO CYCLE FORMATIONS ---
    function startFormationSequence() {
      const btn = document.getElementById('shapeBtn');
      if (autoCycleInterval) { // Stop
        clearInterval(autoCycleInterval);
        autoCycleInterval = null;
        formationState = -1; 
        cycleFormation(); // Reset to Drift
        btn.classList.remove('mode-active');
        return;
      }
      
      if(isTouring) toggleTour();
      btn.classList.add('mode-active');
      formationState = 0; // Start fresh
      cycleFormation(); // First shape immediately
      
      autoCycleInterval = setInterval(() => {
        // If we finished all shapes (State 6 was Infinity, now going to 7)
        if (formationState === 6) {
          clearInterval(autoCycleInterval);
          autoCycleInterval = null;
          formationState = -1; // Force drift
          cycleFormation();
          btn.classList.remove('mode-active');
        } else {
          cycleFormation();
        }
      }, 8000); // 8 seconds per shape
    }

    // FIX FOR MOBILE SHAPES: Reduce Scale
    function getShapeScale() {
      return window.innerWidth < 768 ? 7 : 12; // Mobile scale = 7, Desktop = 12
    }

    function cycleFormation() {
      const fireflies = document.querySelectorAll('.firefly');
      const count = fireflies.length;
      const centerX = 50; 
      const centerY = window.scrollY + (window.innerHeight / 2);
      const scale = getShapeScale(); // Use dynamic scale

      formationState = (formationState + 1) % 8; // 0=Drift, 1-6=Shapes, 7=Reset

      if (formationState === 0) {
        // Drift
        fireflies.forEach((fly, i) => {
          const person = classmates[i];
          fly.style.left = `${person.x}vw`;
          fly.style.top = `${person.y}px`;
          fly.style.transform = 'scale(1)';
          setTimeout(() => { if(formationState===0) fly.classList.add('drifting'); }, 1500);
        });
      } else {
        fireflies.forEach(fly => fly.classList.remove('drifting'));
        
        fireflies.forEach((fly, i) => {
          let x, y, s = 0.8;
          
          if (formationState === 1) { // HEART
            const t = (i / count) * Math.PI * 2;
            x = 16 * Math.pow(Math.sin(t), 3);
            y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            fly.style.left = `calc(${centerX}vw + ${x * scale}px)`;
            fly.style.top = `${centerY + (y * scale)}px`;
          } 
          else if (formationState === 2) { // TREE
            if (i < 10) { x = 0; y = 200 + (i * 1.2 * scale); } 
            else {
              const row = Math.floor((i-10) / 7); 
              const spread = row * 3.5 * scale;
              x = (Math.random() * spread) - (spread/2); y = -200 + (row * 3 * scale);
            }
            fly.style.left = `calc(${centerX}vw + ${x}px)`;
            fly.style.top = `${centerY + y}px`;
          } 
          else if (formationState === 3) { // SPIRAL
            const angle = 0.5 * i; const radius = 0.4 * scale * i;
            x = radius * Math.cos(angle); y = radius * Math.sin(angle);
            fly.style.left = `calc(${centerX}vw + ${x}px)`;
            fly.style.top = `${centerY + y}px`; s = 0.7;
          } 
          else if (formationState === 4) { // V
            const half = Math.floor(count / 2);
            // V shape needs careful mobile scaling
            const widthScale = window.innerWidth < 768 ? 150 : 250;
            const heightScale = window.innerWidth < 768 ? 300 : 500;
            
            if (i < half) { x = -widthScale + (i * (widthScale/half)); y = -250 + (i * (heightScale/half)); } 
            else { const j = i - half; x = 0 + (j * (widthScale/half)); y = 250 - (j * (heightScale/half)); }
            fly.style.left = `calc(${centerX}vw + ${x}px)`;
            fly.style.top = `${centerY + y}px`; s = 0.9;
          }
          else if (formationState === 5) { // HELIX
            const t = (i / count) * 4 * Math.PI; 
            const width = 12 * scale; const height = 600;
            const yPos = (i / count) * height - (height/2);
            if (i % 2 === 0) { x = Math.sin(t) * width; } else { x = Math.sin(t + Math.PI) * width; }
            fly.style.left = `calc(${centerX}vw + ${x}px)`;
            fly.style.top = `${centerY + yPos}px`;
          }
          else if (formationState === 6) { // INFINITY
            const t = (i / count) * 2 * Math.PI;
            const a = 20 * scale;
            x = (a * Math.cos(t)) / (1 + Math.sin(t)**2);
            y = (a * Math.sin(t) * Math.cos(t)) / (1 + Math.sin(t)**2);
            fly.style.left = `calc(${centerX}vw + ${x}px)`;
            fly.style.top = `${centerY + y}px`;
          }

          fly.style.transform = `scale(${s})`;
        });
      }
    }

    // --- 4. SEASONS ENGINE ---
    function toggleSeason() {
      const btn = document.getElementById('seasonBtn');
      currentSeason = (currentSeason + 1) % 3;
      document.body.className = ''; // Reset
      
      if (currentSeason === 0) {
        btn.textContent = 'üçÉ'; // Spring
      } else if (currentSeason === 1) {
        document.body.classList.add('season-autumn');
        btn.textContent = 'üçÅ'; // Autumn
      } else {
        document.body.classList.add('season-winter');
        btn.textContent = '‚ùÑÔ∏è'; // Winter
      }
    }

    // --- 5. ROOT CONNECTIONS ---
    function initRoots() {
      const canvas = document.getElementById('rootsCanvas');
      const ctx = canvas.getContext('2d');
      function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
      window.addEventListener('resize', resize); resize();

      function animate() {
        if (formationState === 0 && !isTouring) { 
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          const flies = document.querySelectorAll('.firefly');
          const positions = [];
          
          flies.forEach(fly => {
            const rect = fly.getBoundingClientRect();
            positions.push({ x: rect.left + 30, y: rect.top + 30 });
          });

          ctx.lineWidth = 0.5;
          ctx.strokeStyle = document.body.classList.contains('season-autumn') ? 'rgba(230, 126, 34, 0.3)' : 'rgba(46, 204, 113, 0.3)';
          
          for (let i = 0; i < positions.length; i++) {
            for (let j = i + 1; j < positions.length; j++) {
              const dx = positions[i].x - positions[j].x;
              const dy = positions[i].y - positions[j].y;
              const dist = Math.sqrt(dx*dx + dy*dy);
              if (dist < 150) { 
                ctx.beginPath(); ctx.moveTo(positions[i].x, positions[i].y); ctx.lineTo(positions[j].x, positions[j].y); ctx.stroke();
              }
            }
          }
        } else { ctx.clearRect(0, 0, canvas.width, canvas.height); }
        requestAnimationFrame(animate);
      }
      animate();
    }

    // --- 6. MODAL & CONFETTI RAIN ---
    const modalContent = document.getElementById('modalContent');

    function showTribute(classmate, clickX, clickY) {
      const modal = document.getElementById('tributeModal');
      document.getElementById('modalName').textContent = classmate.name;
      
      // Dynamic Glow (Flat)
      modalContent.style.background = `linear-gradient(145deg, #151515, ${classmate.color}10)`;
      modalContent.style.border = `1px solid ${classmate.color}60`;
      modalContent.style.setProperty('--modal-glow', classmate.color);
      
      const modalPhoto = document.getElementById('modalPhoto');
      modalPhoto.style.backgroundImage = 'none';
      modalPhoto.style.backgroundColor = classmate.color;
      modalPhoto.style.borderColor = classmate.color;
      
      const tempImg = new Image();
      tempImg.src = classmate.photo;
      tempImg.onload = () => { modalPhoto.style.backgroundImage = `url('${tempImg.src}')`; };
      tempImg.onerror = function() { if (this.src.endsWith('.jpg')) this.src = this.src.replace('.jpg', '.jpeg'); };

      const truthBox = document.getElementById('modalTruth');
      truthBox.innerHTML = ''; truthBox.classList.add('typing-cursor');
      clearInterval(typeWriterInterval);
      let text = `"${classmate.truth}"`; let i = 0;
      typeWriterInterval = setInterval(() => {
        if (i < text.length) { truthBox.innerHTML += text.charAt(i); i++; } 
        else { clearInterval(typeWriterInterval); truthBox.classList.remove('typing-cursor'); }
      }, 30);

      if(window.innerWidth > 768 && clickX && clickY) {
        modal.style.display = 'block';
        const boxW = 360, boxH = 450;
        let posX = clickX + 20; if (posX + boxW > window.innerWidth) posX = clickX - boxW - 20;
        let posY = clickY - 50; if (posY + boxH > window.innerHeight) posY = window.innerHeight - boxH - 20;
        modalContent.style.left = `${posX}px`; modalContent.style.top = `${posY}px`;
      } else {
        modal.style.display = 'flex'; modalContent.style.left = 'auto'; modalContent.style.top = 'auto';
      }

      // TRIGGER CONFETTI
      burst(); // Immediate pop
      startRain(); // Followed by rain
    }

    function closeModal() {
      document.getElementById('tributeModal').style.display = 'none';
      clearInterval(typeWriterInterval);
      
      // Only stop rain if NOT touring. If touring, rain persists.
      if (!isTouring) stopRain(); 
      
      if (isTouring) return; // Don't cancel tour on close
    }

    // CONFETTI LOGIC
    function burst() {
      confetti({
        particleCount: 100, spread: 70, origin: { y: 0.6 },
        zIndex: 9999, // TOP LAYER
        colors: ['#2ecc71', '#f1c40f', '#e74c3c', '#3498db']
      });
    }

    function startRain() {
      if (rainInterval) return; 
      const defaults = { origin: { y: -0.1 }, zIndex: 9999, gravity: 0.5 };
      rainInterval = setInterval(() => {
        confetti(Object.assign({}, defaults, {
          particleCount: 3, spread: 360, startVelocity: 15, ticks: 300,
          colors: ['#2ecc71', '#f1c40f', '#e74c3c', '#3498db']
        }));
      }, 200);
    }

    function stopRain() {
      clearInterval(rainInterval);
      rainInterval = null;
      confetti.reset();
    }

    // --- SEARCH ---
    function filterFireflies() {
      const input = document.getElementById('searchInput').value.toLowerCase();
      const fireflies = document.querySelectorAll('.firefly');
      fireflies.forEach(fly => {
        const name = fly.querySelector('.firefly-name').textContent.toLowerCase();
        if (name.includes(input) && input.length > 0) {
          fly.classList.remove('dimmed'); fly.classList.add('matched');
        } else if (input.length > 0) {
          fly.classList.add('dimmed'); fly.classList.remove('matched');
        } else {
          fly.classList.remove('dimmed', 'matched');
        }
      });
    }

    // --- TOUR ---
    function toggleTour() {
      const btn = document.getElementById('tourBtn');
      isTouring = !isTouring;
      if (isTouring) {
        if(formationState !== 0) { formationState = -1; cycleFormation(); } 
        btn.textContent = '‚ñ†'; btn.classList.add('active');
        tourIndex = 0; 
        
        // Start constant rain for tour
        burst();
        startRain(); 
        playNextTribute();
      } else {
        btn.textContent = '‚ñ∂'; btn.classList.remove('active');
        clearTimeout(tourTimer); 
        stopRain();
        closeModal();
      }
    }

    function playNextTribute() {
      if (!isTouring) return;
      if (tourIndex >= classmates.length) { toggleTour(); return; } 
      const person = classmates[tourIndex];
      window.scrollTo({ top: person.y - 200, behavior: 'smooth' });
      setTimeout(() => {
        if (!isTouring) return;
        showTribute(person, null, null); 
        // Rain is already running from toggleTour
        
        tourTimer = setTimeout(() => {
          document.getElementById('tributeModal').style.display = 'none';
          // DO NOT STOP RAIN HERE
          tourIndex++;
          playNextTribute();
        }, 10000); // 10 Seconds
      }, 800);
    }

    // --- UTILS ---
    document.addEventListener('mousemove', (e) => { if(Math.random()>0.5) { const d=document.createElement('div'); d.className='trail-dot'; d.style.left=e.clientX+'px'; d.style.top=e.clientY+'px'; document.body.appendChild(d); setTimeout(()=>d.remove(),1000); }});
    document.getElementById('tributeModal').addEventListener('click', (e) => { if (e.target === document.getElementById('tributeModal')) closeModal(); });
    function adjustContainerHeight() {
      const container = document.querySelector('.container'); const fireflies = document.querySelectorAll('.firefly');
      let maxBottom = 0; fireflies.forEach(fly => maxBottom = Math.max(maxBottom, fly.getBoundingClientRect().bottom + window.scrollY));
      container.style.minHeight = `${maxBottom + 200}px`;
    }
    window.addEventListener('resize', adjustContainerHeight);

    // --- 8. SMART AUDIO (Pause on Tab Switch) ---
    document.addEventListener("visibilitychange", () => {
      const music = document.getElementById('bgMusic');
      const enterScreen = document.getElementById('enterScreen');

      // Only control music if the user has actually entered the forest
      if (enterScreen.style.display === 'none') {
        if (document.hidden) {
          music.pause(); // User left the tab -> Pause
        } else {
          music.play();  // User came back -> Resume
        }
      }
    });
  </script>
</body>
</html>



